# Matter.js v2 테스트 가이드

**날짜**: 2025-10-27
**버전**: Matter.js v2 with Brake System
**목적**: 브레이크 시스템이 포함된 Matter.js 물리 엔진 검증

---

## 🚀 테스트 시작

### 1. 서버 실행

```bash
cd /Users/joejeon/Documents/develop/destruction-zone-web
python3 -m http.server 8080
```

브라우저에서 `http://localhost:8080` 접속

### 2. 게임 시작

1. "New Game" 클릭
2. 방향키로 탱크 조작
3. D키로 무기 발사

---

## 🎮 디버그 키 (매우 중요!)

게임 중에 다음 키들을 눌러서 확인:

### 기본 디버그 키

| 키 | 기능 | 확인 사항 |
|---|------|----------|
| **P** | 물리 디버그 ON/OFF | 초록색 삼각형 바디, 빨간색 경계벽, 청록색 속도 벡터 표시 |
| **I** | 통계 표시 ON/OFF | 오른쪽 상단에 "MATTER.JS STATS" 박스 표시 |
| **V** | 속도 벡터 ON/OFF | 탱크에서 노란색 화살표 표시 |
| **T** | 튜닝 모드 ON/OFF | 콘솔에 "Tuning Mode ON" 메시지 + 키 설명 |

### 튜닝 모드 키 (T키 누른 후)

**T키를 먼저 눌러서 튜닝 모드를 활성화해야 합니다!**

| 키 | 파라미터 | 효과 |
|---|----------|------|
| **1** | BRAKE_STRENGTH +1 | 브레이크 강해짐 (빨리 멈춤) |
| **2** | BRAKE_STRENGTH -1 | 브레이크 약해짐 (천천히 멈춤) |
| **3** | ROTATION_BRAKE +0.05 | 회전 브레이크 강해짐 |
| **4** | ROTATION_BRAKE -0.05 | 회전 브레이크 약해짐 |
| **5** | FORCE_SCALE +0.00001 | 추진력 증가 (빨라짐) |
| **6** | FORCE_SCALE -0.00001 | 추진력 감소 (느려짐) |
| **7** | frictionAir +0.01 | 공기 저항 증가 |
| **8** | frictionAir -0.01 | 공기 저항 감소 |

**주의**: 숫자 키를 누르면 콘솔(F12)에 현재 값이 표시됩니다!

---

## ✅ 테스트 체크리스트

### Phase 1: 기본 동작 확인

- [ ] **게임이 시작되는가?**
  - New Game 클릭 시 게임 화면 표시
  - 두 개의 탱크가 보임 (플레이어 + AI)

- [ ] **Matter.js가 로드되었는가?**
  - P키를 눌렀을 때 초록색 바디가 표시됨
  - 빨간색 경계벽이 4개 보임
  - 콘솔에 "Physics engine initialized (Matter.js v2 with Brake System)" 표시

- [ ] **통계가 표시되는가?**
  - I키를 눌렀을 때 오른쪽 상단에 박스 표시
  - 다음 정보들이 보임:
    - BRAKE_STRENGTH: 12.0
    - ROTATION_BRAKE: 0.4
    - FORCE_SCALE: 0.00008
    - friction: 0.8
    - frictionAir: 0.12
    - density: 0.08
    - Tank Stats (Speed, Angular 등)

### Phase 2: 브레이크 시스템 테스트 ⭐ (가장 중요!)

#### 2.1 이동 브레이크

1. **가속 테스트**
   - [ ] 위쪽 화살표를 꾹 눌러서 최고 속도까지 가속
   - [ ] 속도가 점진적으로 증가하는가?
   - [ ] 너무 빠르거나 느리지 않은가?

2. **브레이크 테스트** 🔴
   - [ ] 최고 속도에서 키를 뗌
   - [ ] **1초 이내에 거의 정지하는가?** (매우 중요!)
   - [ ] 너무 급격하게 멈추지 않는가? (자연스러운가?)
   - [ ] 계속 밀려다니지 않는가? (관성 과다 아닌가?)

3. **브레이크 조정 (문제가 있으면)**
   - 너무 빨리 멈추면 → T키 → 2키 (BRAKE_STRENGTH 감소)
   - 너무 천천히 멈추면 → T키 → 1키 (BRAKE_STRENGTH 증가)
   - I키로 현재 값 확인

#### 2.2 회전 브레이크

1. **회전 가속**
   - [ ] 왼쪽/오른쪽 화살표를 꾹 눌러서 빠르게 회전
   - [ ] 회전 속도가 증가하는가?

2. **회전 브레이크** 🔴
   - [ ] 빠른 회전 중 키를 뗌
   - [ ] **빠르게 회전이 멈추는가?**
   - [ ] 계속 돌지 않는가?

3. **회전 조정 (문제가 있으면)**
   - 너무 빨리 멈추면 → T키 → 4키 (ROTATION_BRAKE 감소)
   - 너무 천천히 멈추면 → T키 → 3키 (ROTATION_BRAKE 증가)

### Phase 3: 충돌 테스트

- [ ] **탱크-벽 충돌**
  - 벽에 부딪혔을 때 멈추는가?
  - 벽을 관통하지 않는가?

- [ ] **탱크-탱크 충돌**
  - AI 탱크와 충돌 시 자연스럽게 밀리는가?
  - 데미지가 발생하는가? (쉴드 감소 확인)
  - 콘솔에 "Tank collision: X damage" 메시지 표시

- [ ] **발사체 충돌**
  - 미사일이 상대 탱크에 맞는가?
  - 폭발 효과가 표시되는가?

### Phase 4: 성능 테스트

- [ ] **프레임레이트**
  - I키를 눌러서 FPS 확인
  - 60 FPS에 가까운가? (최소 50 FPS 이상)
  - 버벅거리지 않는가?

- [ ] **안정성**
  - 1분 이상 플레이 가능한가?
  - 충돌이나 버그가 없는가?
  - 콘솔에 에러 메시지가 없는가?

---

## 📊 예상 결과값

### 초기 파라미터 (기준값)

```javascript
BRAKE_STRENGTH: 12.0
ROTATION_BRAKE: 0.4
FORCE_SCALE: 0.00008
friction: 0.8
frictionAir: 0.12
density: 0.08
```

### 정지 시간 목표

- **이동 정지**: 0.8초 ~ 1.2초 (원본 게임: ~1초)
- **회전 정지**: 0.5초 ~ 0.8초

### 속도 목표

- **최고 속도**: 100 px/s (STANDARD 탱크 기준)
- **가속 시간**: 0.4초 ~ 0.6초 (원본: ~0.5초)

---

## 🔧 문제 해결

### 문제 1: 너무 빨리 멈춤 (뚝뚝 끊김)

**증상**: 키를 떼자마자 급정지
**원인**: BRAKE_STRENGTH가 너무 높음
**해결**:
```
T키 → 2키 (여러 번 눌러서 10~8 정도로 낮춤)
```

### 문제 2: 너무 천천히 멈춤 (계속 밀려다님)

**증상**: 키를 떼도 한참 동안 계속 움직임
**원인**: BRAKE_STRENGTH가 너무 낮음
**해결**:
```
T키 → 1키 (여러 번 눌러서 15~20 정도로 높임)
```

### 문제 3: 회전이 안 멈춤

**증상**: 키를 떼도 계속 회전
**원인**: ROTATION_BRAKE가 너무 낮음
**해결**:
```
T키 → 3키 (여러 번 눌러서 0.6~0.7 정도로 높임)
```

### 문제 4: 너무 느리거나 빠름

**증상**: 탱크 속도가 원본과 많이 다름
**원인**: FORCE_SCALE이 부적절
**해결**:
```
너무 느리면 → T키 → 5키
너무 빠르면 → T키 → 6키
```

### 문제 5: 통계가 안 보임

**확인사항**:
1. I키를 눌렀는가?
2. 게임이 시작되었는가? (New Game 클릭)
3. F12를 눌러서 콘솔 에러 확인
4. 브라우저 새로고침 (Ctrl+R 또는 Cmd+R)

### 문제 6: T키가 안 먹힘

**확인사항**:
1. 콘솔(F12)을 열어서 메시지 확인
2. "Tuning Mode ON" 메시지가 표시되어야 함
3. 그 후 1~8 숫자키가 작동함
4. 각 숫자키를 누르면 콘솔에 "⬆️ BRAKE_STRENGTH: XX" 같은 메시지 표시

---

## 📝 테스트 결과 기록

### 최종 파라미터 값

테스트 후 최적 값 기록:

```
BRAKE_STRENGTH: _____ (초기: 12.0)
ROTATION_BRAKE: _____ (초기: 0.4)
FORCE_SCALE: ________ (초기: 0.00008)
frictionAir: _____ (초기: 0.12)
```

### 정지 시간 측정

- 이동 정지 시간: _____ 초
- 회전 정지 시간: _____ 초

### 조작감 평가 (주관적)

- [ ] 매우 좋음 (원본과 거의 동일)
- [ ] 좋음 (약간 다르지만 괜찮음)
- [ ] 보통 (사용 가능하지만 조정 필요)
- [ ] 나쁨 (원본과 많이 다름)
- [ ] 매우 나쁨 (사용 불가)

### 발견된 버그

```
1.
2.
3.
```

### 추가 코멘트

```
(자유 작성)
```

---

## 🎯 성공 기준

### 필수 조건 (Must Pass)

- [x] Matter.js 엔진이 정상 작동
- [ ] 브레이크 시스템이 작동 (1초 이내 정지)
- [ ] 충돌 감지 100% 정확
- [ ] 60 FPS 유지
- [ ] 버그 없음

### 선호 조건 (Nice to Have)

- [ ] 정지 시간이 원본 ±30% 이내
- [ ] 조작감이 원본과 유사
- [ ] 충돌 반응이 자연스러움

---

## 🚨 실패 시 조치

다음 중 하나라도 해당되면 **롤백 고려**:

1. 브레이크가 전혀 작동하지 않음
2. 성능이 30 FPS 이하
3. 치명적인 버그 발견
4. 조작감이 원본과 너무 다름

**롤백 명령어**:
```bash
git checkout main
```

---

**문서 버전**: 1.0
**최종 업데이트**: 2025-10-27
**작성자**: Claude Code
**참조**: MATTER_INTEGRATION_PLAN_V2.md
